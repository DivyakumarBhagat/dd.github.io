

<!DOCTYPE html>
<html>
<head>

<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover">
<meta http-equiv="X-UA-Compatible" content="IE=edge">

	  
</head>
<body>
	<p>loading</p>
	<span id="rollValue" class="hidden"></span>
	<script>
		
window.addEventListener('DOMContentLoaded', (event) => {
	var url = window.location.href;
	navigate(url, false);
	navigate(url.replace( "#!/", "/"), false
});
//document.getElementById("rollValue").addEventListener('beforeunload', (event) => {
window.addEventListener('popstate', (event) => {
        console.log('inside popstate');
	if (!e.state || !e.state.path) {
    return;
  }
		if (window.performance.navigation.type == window.performance.navigation.TYPE_RELOAD) 
	{
	navigate(e.state.path, true);
	}
	
},false);
		
function navigate(url, popping) {
  console.log('navigating to %s', url);
  document.body.innerHTML = url;
  if (!popping) {
    window.history.pushState({path: url}, document.title, url);
  }
}	
		
		/*
		previous working partial correctly
window.addEventListener('DOMContentLoaded', (event) => {
			console.log("DOMContentLoaded");
	var url = window.location.href;
			console.log("url");
	document.getElementById("rollValue").innerHTML = url;
window.history.pushState({}, document.title, url.replace( "#/", "/"));
});
window.addEventListener('beforeunload', (event) => {
	event.preventDefault();
			console.log("beforeunload");
	var url = document.getElementById("rollValue").innerHTML;
	history.pushstate({}, document.title, url);
			window.onpopstate = function()
			{
				history.go(1);
			}
			

	event.returnValue = "";
});
		*/
    </script>
</body>
</html>
