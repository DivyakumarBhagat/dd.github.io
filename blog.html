

<!DOCTYPE html>
<html>
<head>

<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover">
<meta http-equiv="X-UA-Compatible" content="IE=edge">

	  
</head>
<body>
	<p>loading</p>
	<span id="rollValue" class="hidden"></span>
	<script>
		
window.addEventListener('DOMContentLoaded', (event) => {
	content.log("domcontentloaded");
	var url = window.location.href;
	document.getElementById("rollValue").innerHTML = url;
    //window.history.pushState({path: "original"}, document.title, url);
    window.history.replaceState({path: true}, document.title, url.replace( "#!/", "/"));
});
//document.getElementById("rollValue").addEventListener('beforeunload', (event) => {
window.addEventListener('popstate', (event) => {
        console.log('inside popstate');
	var url = document.getElementById("rollValue");
	if (e.state.path) {
    window.history.replaceState({path: false}, document.title, url);
		window.history.go(0);
  }
	
},false);
	
		
		/*
		previous working partial correctly
window.addEventListener('DOMContentLoaded', (event) => {
			console.log("DOMContentLoaded");
	var url = window.location.href;
			console.log("url");
	document.getElementById("rollValue").innerHTML = url;
window.history.pushState({}, document.title, url.replace( "#/", "/"));
});
window.addEventListener('beforeunload', (event) => {
	event.preventDefault();
			console.log("beforeunload");
	var url = document.getElementById("rollValue").innerHTML;
	history.pushstate({}, document.title, url);
			window.onpopstate = function()
			{
				history.go(1);
			}
			

	event.returnValue = "";
});
		*/
    </script>
</body>
</html>
