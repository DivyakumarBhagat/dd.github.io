

<!DOCTYPE html>
<html>
<head>

<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover">
<meta http-equiv="X-UA-Compatible" content="IE=edge">

	  
</head>
<body>
	<p>loading</p>
	<span id="rollValue" class="hidden"></span>
	<script>
		
window.addEventListener('DOMContentLoaded', (event) => {
	console.log("domcontentloaded");
	var url = window.location.pathname + window.location.search + window.location.hash;
	document.getElementById("rollValue").innerHTML = url;
	if(window.history.pushState) {
//window.history.pushState({path: "original"}, document.title, url);
//   window.history.pushState({path: url}, document.title, url.replace( "#!/", "/"));
   window.history.replaceState({path: url,count:1}, document.title, url.replace( "#!/", "/"));		
  }
});
//document.getElementById("rollValue").addEventListener('beforeunload', (event) => {
window.addEventListener('popstate', (event) => {
        console.log('inside popstate');
	var url = document.getElementById("rollValue").innerHTML;
   window.history.pushState({path: url,count:0}, document.title, url);	
		window.history.go(0);
  
});
	
	
		
		/*
		previous working partial correctly
window.addEventListener('DOMContentLoaded', (event) => {
			console.log("DOMContentLoaded");
	var url = window.location.href;
			console.log("url");
	document.getElementById("rollValue").innerHTML = url;
window.history.pushState({}, document.title, url.replace( "#/", "/"));
});
window.addEventListener('beforeunload', (event) => {
	event.preventDefault();
			console.log("beforeunload");
	var url = document.getElementById("rollValue").innerHTML;
	history.pushstate({}, document.title, url);
			window.onpopstate = function()
			{
				history.go(0);
			}
			

	event.returnValue = "";
});
		*/
    </script>
</body>
</html>
