

<!DOCTYPE html>
<html>
<head>
	  
</head>
<body>
	<p>loading</p>
	<span id="rollValue" class="hidden"></span>
	<script>
		
window.addEventListener('DOMContentLoaded', (event) => {
	console.log("domcontentloaded");
	var url = window.location.pathname + window.location.search + window.location.hash;
	document.getElementById("rollValue").innerHTML = url;
	var i=1;
console.log("1:"+ window.location.href );  // whatever your current location href is
if(window.history.pushState) {
	var i=0;
	if(window.history.state.path)
	{
window.history.replaceState({path: 1}, document.title, url);
		i=1;
	}
	else
	{
window.history.replaceState({path: 0}, document.title, url);
		i=0;
	}
console.log("2:"+ window.location.href );  // whatever your current location href is
	
window.history.pushState({path: i}, document.title, url.replace( "#!/", "/"));	
console.log("4:"+ window.location.href );  // whatever your current location href is
  }
});
window.addEventListener('popstate', (event) => {
        console.log('inside popstate');
	var url = document.getElementById("rollValue").innerHTML;
	if(window.history.state.path === 1 || window.history.state.path === 0)
	{
		window.history.go(-1);
	}
	else
	{
window.history.replaceState({path: 0}, document.title, url);
		window.history.go(0);
	}
  
});
	
	
		
		/*
		previous working partial correctly
window.addEventListener('DOMContentLoaded', (event) => {
			console.log("DOMContentLoaded");
	var url = window.location.href;
			console.log("url");
	document.getElementById("rollValue").innerHTML = url;
window.history.pushState({}, document.title, url.replace( "#/", "/"));
});
window.addEventListener('beforeunload', (event) => {
	event.preventDefault();
			console.log("beforeunload");
	var url = document.getElementById("rollValue").innerHTML;
	history.pushstate({}, document.title, url);
			window.onpopstate = function()
			{
				history.go(0);
			}
			

	event.returnValue = "";
});
		*/
    </script>
</body>
</html>
